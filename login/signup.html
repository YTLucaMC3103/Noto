<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noto - Sign up</title>
    <link rel="stylesheet" href="login.css">
    <link rel="icon" href="/pics/logo.png">
    <script src="login.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>

    <script>
    const firebaseConfig = {
    apiKey: "AIzaSyAq5rxUa0QzcSS_wBVlJDV3PimrHoKAMVE",
    authDomain: "noto-6cfb7.firebaseapp.com",
    projectId: "noto-6cfb7",
    storageBucket: "noto-6cfb7.firebasestorage.app",
    messagingSenderId: "717653458967",
    appId: "1:717653458967:web:ec9417bb70a0b34b289c52",
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    function loginWithGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then(result => {
          const user = result.user;
          console.log("Eingeloggt als:", user.displayName);
          alert("Welcome, " + user.displayName);
        })
        .catch(error => {
          console.error("Login-Fehler:", error);
          alert("Error!");
        });
    }

    function loginWithEmail() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      auth.signInWithEmailAndPassword(email, password)
        .then(userCredential => {
          alert("Eingeloggt als " + userCredential.user.email);
        })
        .catch(error => {
          alert("Login-Fehler: " + error.message);
        });
    }

  function register() {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirm-password").value;

    if (password !== confirmPassword) {
      showSnackbar("passwords do not match");
      return;
    }

    auth.createUserWithEmailAndPassword(email, password)
      .then((userCredential) => {
        const user = userCredential.user;

        // ðŸ“© BestÃ¤tigungs-E-Mail senden
        user.sendEmailVerification({
          url: "https://notoweb.netlify.app/verifyComplete.html"
        }).then(() => {
          window.location.href = "/link.html";
        });

      })
      .catch((error) => {
        showSnackbar(error.message);
        console.error(error);
      });
  }
  </script>
</head>
<body>
    <div class="left">
    <div class="head">
      <h1>Welcome to Noto</h1>
      <br>
      <p>Please enter your Details to create an account</p>
    </div>

    <button onclick="loginWithGoogle()" id="google-auth">
      <img src="/pics/Google Icon.png" alt="">
      Sign up with Google
    </button>

    <div class="divider"><span>or</span></div>

    <div class="input-group">
      <input type="email" id="email" placeholder="Email">
    </div>

    <div class="input-group">
      <input type="password" id="password" placeholder="Password">
      <i class="fa-solid fa-eye eye-icon" onclick="togglePassword('password', this)"></i>
    </div>

    <div class="input-group">
      <input type="password" id="confirm-password" placeholder="Confirm Password">
      <i class="fa-solid fa-eye eye-icon" onclick="togglePassword('confirm-password', this)"></i>
    </div>

    <button class="login-button" onclick="register()">Create Account</button>

    <p class="signup">
      Do you already have an account? <a href="login.html">Log in</a>
    </p>
  </div>

  <div id="snackbar"></div>
</body>
</html>